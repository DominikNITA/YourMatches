@page "/"
@inject HttpClient Http

<LandingLogo></LandingLogo>
@if (matches == null)
{
    @:Loading Matches...
}
else
{

    foreach (var match in matches)
    {
        <ScheduledMatch Match="match"></ScheduledMatch>
    }
}

<SurveyPrompt Title="How is Blazor working for you?" />

@code{
    private List<ScheduledMatchDto> matches;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var response = await Http.GetJsonAsync<List<ScheduledMatchDto>>("match");
            response.Sort((emp1, emp2) => emp1.Date.Ticks.CompareTo(emp2.Date.Ticks));
            matches = response;
        }
        catch(Exception e)
        {
            Console.WriteLine(e.Message);
        }
        //GetMatches();
    }

    protected async void GetMatches()
    {
        matches = null;
        matches = await Http.GetJsonAsync<List<ScheduledMatchDto>>("match");
    }
}